{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tima\\\\Desktop\\\\AutoParts\\\\frontend\\\\src\\\\pages\\\\Tasks.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Tasks() {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    taskId\n  } = useParams();\n  const [logModal, setLogModal] = useState({\n    open: false,\n    log: '',\n    taskId: null\n  });\n  // --- добавляю константу адреса backend ---\n  const BACKEND_URL = 'http://localhost:8000/'; // или внешний адрес/домен\n  // --- proxy upload state ---\n  const [proxyFile, setProxyFile] = useState(null);\n  const [proxyUploadStatus, setProxyUploadStatus] = useState('');\n  const [proxyCount, setProxyCount] = useState(null);\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n  const fetchTasks = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/api/parsing-tasks/', {\n        headers: {\n          'Authorization': `Token ${localStorage.getItem('token')}`\n        }\n      });\n      setTasks(response.data);\n    } catch (err) {\n      setError('Ошибка при загрузке задач');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    let interval;\n    if (taskId) {\n      interval = setInterval(async () => {\n        try {\n          const response = await axios.get(`http://localhost:8000/api/parsing-tasks/${taskId}/status/`, {\n            headers: {\n              'Authorization': `Token ${localStorage.getItem('token')}`\n            }\n          });\n          setTasks(prevTasks => prevTasks.map(task => task.id === parseInt(taskId) ? {\n            ...task,\n            ...response.data\n          } : task));\n          if (response.data.status === 'completed' || response.data.status === 'failed') {\n            clearInterval(interval);\n          }\n        } catch (err) {\n          console.error('Ошибка при обновлении статуса:', err);\n        }\n      }, 5000);\n    } else {\n      // Автообновление списка задач, если есть незавершённые задачи\n      interval = setInterval(async () => {\n        try {\n          const response = await axios.get('http://localhost:8000/api/parsing-tasks/', {\n            headers: {\n              'Authorization': `Token ${localStorage.getItem('token')}`\n            }\n          });\n          setTasks(response.data);\n        } catch (err) {\n          // ignore\n        }\n      }, 5000);\n    }\n    return () => {\n      if (interval) {\n        clearInterval(interval);\n      }\n    };\n  }, [taskId]);\n  const clearTasks = async () => {\n    if (window.confirm('Вы уверены, что хотите очистить все задачи?')) {\n      try {\n        await fetch('http://localhost:8000/api/parsing-tasks/clear/', {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Token ${localStorage.getItem('token')}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        fetchTasks(); // Обновляем список задач после очистки\n      } catch (err) {\n        console.error('Ошибка при очистке задач:', err);\n        setError('Не удалось очистить задачи');\n      }\n    }\n  };\n  const handleShowLog = async id => {\n    setLogModal({\n      open: true,\n      log: 'Загрузка...',\n      taskId: id\n    });\n    try {\n      const response = await axios.get(`http://localhost:8000/api/parsing-tasks/${id}/log/`, {\n        headers: {\n          'Authorization': `Token ${localStorage.getItem('token')}`\n        }\n      });\n      setLogModal({\n        open: true,\n        log: response.data.log || 'Лог пуст',\n        taskId: id\n      });\n    } catch (err) {\n      setLogModal({\n        open: true,\n        log: 'Ошибка при загрузке лога',\n        taskId: id\n      });\n    }\n  };\n  const handleCloseLog = () => {\n    setLogModal({\n      open: false,\n      log: '',\n      taskId: null\n    });\n  };\n\n  // Proxy upload handler\n  const handleProxyFileChange = e => {\n    setProxyFile(e.target.files[0]);\n    setProxyUploadStatus('');\n    setProxyCount(null);\n  };\n  const handleProxyUpload = async e => {\n    e.preventDefault();\n    if (!proxyFile) return;\n    setProxyUploadStatus('Загрузка...');\n    const formData = new FormData();\n    formData.append('file', proxyFile);\n    try {\n      const response = await axios.post(BACKEND_URL + 'api/proxy/upload/', formData, {\n        headers: {\n          'Authorization': `Token ${localStorage.getItem('token')}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setProxyUploadStatus('Прокси успешно загружены!');\n      setProxyCount(response.data.count);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setProxyUploadStatus('Ошибка загрузки: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n      setProxyCount(null);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-red-600\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row items-center justify-between mb-6 gap-4 p-4 bg-white rounded-lg shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col md:flex-row items-center gap-2\",\n        onSubmit: handleProxyUpload,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u043A\\u0441\\u0438 (.txt):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".txt\",\n          onChange: handleProxyFileChange,\n          className: \"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold shadow\",\n          disabled: !proxyFile,\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600 min-h-[1.5em]\",\n        children: proxyUploadStatus && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: proxyUploadStatus.startsWith('Ошибка') ? 'text-red-600' : 'text-green-700',\n          children: [proxyUploadStatus, proxyCount !== null && proxyUploadStatus.startsWith('Прокси') && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: [\"(\", proxyCount, \" \\u0448\\u0442.)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearTasks,\n        className: \"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors\",\n        children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C \\u0432\\u0441\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow overflow-hidden sm:rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"divide-y divide-gray-200\",\n        children: tasks.map(task => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-4 sm:px-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium text-blue-600 truncate\",\n                  children: [\"\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430 #\", task.id]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-2 flex-shrink-0 flex\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${task.status === 'completed' ? 'bg-green-100 text-green-800' : task.status === 'failed' ? 'bg-red-100 text-red-800' : task.status === 'in_progress' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800'}`,\n                    children: task.status === 'completed' ? 'Завершено' : task.status === 'failed' ? 'Ошибка' : task.status === 'in_progress' ? 'В процессе' : 'Ожидает'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ml-2 flex-shrink-0 flex\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: new Date(task.created_at).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 sm:flex sm:justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sm:flex\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"flex items-center text-sm text-gray-500\",\n                  children: task.file\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), task.progress > 0 && task.progress < 100 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full bg-gray-200 rounded-full h-2.5\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-blue-600 h-2.5 rounded-full\",\n                    style: {\n                      width: `${task.progress}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2\",\n                  children: [task.progress, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this), task.error_message && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-red-600\",\n              children: task.error_message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-xs text-gray-500 underline hover:text-blue-600\",\n                onClick: () => handleShowLog(task.id),\n                children: \"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043B\\u043E\\u0433 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), task.status === 'completed' && task.result_files && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex flex-col gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500\",\n                children: \"\\u0424\\u0430\\u0439\\u043B\\u044B \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 21\n              }, this), Object.entries(task.result_files).map(([site, path]) => /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `${BACKEND_URL}${path.replace(/\\\\/g, '/')}`,\n                className: \"text-sm font-medium text-blue-600 hover:text-blue-500\",\n                download: true,\n                children: [site === 'autopiter' && 'Autopiter', site === 'emex' && 'Emex', site === 'armtek' && 'Armtek', !['autopiter', 'emex', 'armtek'].includes(site) && site]\n              }, site, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), task.status === 'completed' && task.result_file && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `${BACKEND_URL}${task.result_file}`,\n                className: \"text-sm font-medium text-blue-600 hover:text-blue-500\",\n                download: true,\n                children: \"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this)\n        }, task.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), logModal.open && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg max-w-2xl w-full p-6 relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"absolute top-2 right-2 text-gray-400 hover:text-gray-700\",\n          onClick: handleCloseLog,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-bold mb-2\",\n          children: [\"\\u041B\\u043E\\u0433 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438 #\", logModal.taskId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"bg-gray-100 p-2 rounded text-xs max-h-96 overflow-auto whitespace-pre-wrap\",\n          children: logModal.log\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n_s(Tasks, \"TcdNx2lsiYLpcIKRm6dLGrkeV3k=\", false, function () {\n  return [useParams];\n});\n_c = Tasks;\nexport default Tasks;\nvar _c;\n$RefreshReg$(_c, \"Tasks\");","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","jsxDEV","_jsxDEV","Tasks","_s","tasks","setTasks","loading","setLoading","error","setError","taskId","logModal","setLogModal","open","log","BACKEND_URL","proxyFile","setProxyFile","proxyUploadStatus","setProxyUploadStatus","proxyCount","setProxyCount","fetchTasks","response","get","headers","localStorage","getItem","data","err","interval","setInterval","prevTasks","map","task","id","parseInt","status","clearInterval","console","clearTasks","window","confirm","fetch","method","handleShowLog","handleCloseLog","handleProxyFileChange","e","target","files","handleProxyUpload","preventDefault","formData","FormData","append","post","count","_err$response","_err$response$data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","accept","onChange","disabled","startsWith","onClick","Date","created_at","toLocaleString","file","progress","style","width","error_message","result_files","Object","entries","site","path","href","replace","download","includes","result_file","_c","$RefreshReg$"],"sources":["C:/Users/Tima/Desktop/AutoParts/frontend/src/pages/Tasks.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction Tasks() {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { taskId } = useParams();\r\n  const [logModal, setLogModal] = useState({ open: false, log: '', taskId: null });\r\n  // --- добавляю константу адреса backend ---\r\n  const BACKEND_URL = 'http://localhost:8000/'; // или внешний адрес/домен\r\n  // --- proxy upload state ---\r\n  const [proxyFile, setProxyFile] = useState(null);\r\n  const [proxyUploadStatus, setProxyUploadStatus] = useState('');\r\n  const [proxyCount, setProxyCount] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchTasks();\r\n  }, []);\r\n\r\n  const fetchTasks = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:8000/api/parsing-tasks/', {\r\n        headers: {\r\n          'Authorization': `Token ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      setTasks(response.data);\r\n    } catch (err) {\r\n      setError('Ошибка при загрузке задач');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let interval;\r\n    if (taskId) {\r\n      interval = setInterval(async () => {\r\n        try {\r\n          const response = await axios.get(`http://localhost:8000/api/parsing-tasks/${taskId}/status/`, {\r\n            headers: {\r\n              'Authorization': `Token ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          \r\n          setTasks(prevTasks => \r\n            prevTasks.map(task => \r\n              task.id === parseInt(taskId) \r\n                ? { ...task, ...response.data }\r\n                : task\r\n            )\r\n          );\r\n\r\n          if (response.data.status === 'completed' || response.data.status === 'failed') {\r\n            clearInterval(interval);\r\n          }\r\n        } catch (err) {\r\n          console.error('Ошибка при обновлении статуса:', err);\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      // Автообновление списка задач, если есть незавершённые задачи\r\n      interval = setInterval(async () => {\r\n        try {\r\n          const response = await axios.get('http://localhost:8000/api/parsing-tasks/', {\r\n            headers: {\r\n              'Authorization': `Token ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          setTasks(response.data);\r\n        } catch (err) {\r\n          // ignore\r\n        }\r\n      }, 5000);\r\n    }\r\n\r\n    return () => {\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n  }, [taskId]);\r\n\r\n  const clearTasks = async () => {\r\n    if (window.confirm('Вы уверены, что хотите очистить все задачи?')) {\r\n      try {\r\n        await fetch('http://localhost:8000/api/parsing-tasks/clear/', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Token ${localStorage.getItem('token')}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        fetchTasks(); // Обновляем список задач после очистки\r\n      } catch (err) {\r\n        console.error('Ошибка при очистке задач:', err);\r\n        setError('Не удалось очистить задачи');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleShowLog = async (id) => {\r\n    setLogModal({ open: true, log: 'Загрузка...', taskId: id });\r\n    try {\r\n      const response = await axios.get(`http://localhost:8000/api/parsing-tasks/${id}/log/`, {\r\n        headers: {\r\n          'Authorization': `Token ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      setLogModal({ open: true, log: response.data.log || 'Лог пуст', taskId: id });\r\n    } catch (err) {\r\n      setLogModal({ open: true, log: 'Ошибка при загрузке лога', taskId: id });\r\n    }\r\n  };\r\n\r\n  const handleCloseLog = () => {\r\n    setLogModal({ open: false, log: '', taskId: null });\r\n  };\r\n\r\n  // Proxy upload handler\r\n  const handleProxyFileChange = (e) => {\r\n    setProxyFile(e.target.files[0]);\r\n    setProxyUploadStatus('');\r\n    setProxyCount(null);\r\n  };\r\n  const handleProxyUpload = async (e) => {\r\n    e.preventDefault();\r\n    if (!proxyFile) return;\r\n    setProxyUploadStatus('Загрузка...');\r\n    const formData = new FormData();\r\n    formData.append('file', proxyFile);\r\n    try {\r\n      const response = await axios.post(BACKEND_URL + 'api/proxy/upload/', formData, {\r\n        headers: {\r\n          'Authorization': `Token ${localStorage.getItem('token')}`,\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      setProxyUploadStatus('Прокси успешно загружены!');\r\n      setProxyCount(response.data.count);\r\n    } catch (err) {\r\n      setProxyUploadStatus('Ошибка загрузки: ' + (err.response?.data?.error || err.message));\r\n      setProxyCount(null);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center text-red-600\">\r\n        {error}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto\">\r\n      {/* Proxy upload modern UI */}\r\n      <div className=\"flex flex-col md:flex-row items-center justify-between mb-6 gap-4 p-4 bg-white rounded-lg shadow\">\r\n        <form className=\"flex flex-col md:flex-row items-center gap-2\" onSubmit={handleProxyUpload}>\r\n          <label className=\"block text-sm font-medium text-gray-700\">Загрузить прокси (.txt):</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".txt\"\r\n            onChange={handleProxyFileChange}\r\n            className=\"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold shadow\"\r\n            disabled={!proxyFile}\r\n          >\r\n            Загрузить\r\n          </button>\r\n        </form>\r\n        <div className=\"text-sm text-gray-600 min-h-[1.5em]\">\r\n          {proxyUploadStatus && (\r\n            <span className={proxyUploadStatus.startsWith('Ошибка') ? 'text-red-600' : 'text-green-700'}>\r\n              {proxyUploadStatus}\r\n              {proxyCount !== null && proxyUploadStatus.startsWith('Прокси') && (\r\n                <span className=\"ml-2\">({proxyCount} шт.)</span>\r\n              )}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-end mb-4\">\r\n        <button\r\n          onClick={clearTasks}\r\n          className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors\"\r\n        >\r\n          Очистить все задачи\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n        <ul className=\"divide-y divide-gray-200\">\r\n          {tasks.map((task) => (\r\n            <li key={task.id}>\r\n              <div className=\"px-4 py-4 sm:px-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center\">\r\n                    <p className=\"text-sm font-medium text-blue-600 truncate\">\r\n                      Задача #{task.id}\r\n                    </p>\r\n                    <div className=\"ml-2 flex-shrink-0 flex\">\r\n                      <p className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                        task.status === 'completed' ? 'bg-green-100 text-green-800' :\r\n                        task.status === 'failed' ? 'bg-red-100 text-red-800' :\r\n                        task.status === 'in_progress' ? 'bg-yellow-100 text-yellow-800' :\r\n                        'bg-gray-100 text-gray-800'\r\n                      }`}>\r\n                        {task.status === 'completed' ? 'Завершено' :\r\n                         task.status === 'failed' ? 'Ошибка' :\r\n                         task.status === 'in_progress' ? 'В процессе' :\r\n                         'Ожидает'}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"ml-2 flex-shrink-0 flex\">\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {new Date(task.created_at).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-2 sm:flex sm:justify-between\">\r\n                  <div className=\"sm:flex\">\r\n                    <p className=\"flex items-center text-sm text-gray-500\">\r\n                      {task.file}\r\n                    </p>\r\n                  </div>\r\n                  {(task.progress > 0 && task.progress < 100) && (\r\n                    <div className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\">\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                        <div\r\n                          className=\"bg-blue-600 h-2.5 rounded-full\"\r\n                          style={{ width: `${task.progress}%` }}\r\n                        ></div>\r\n                      </div>\r\n                      <span className=\"ml-2\">{task.progress}%</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {task.error_message && (\r\n                  <div className=\"mt-2 text-sm text-red-600\">\r\n                    {task.error_message}\r\n                  </div>\r\n                )}\r\n                {/* Кнопка для показа лога */}\r\n                <div className=\"mt-2\">\r\n                  <button\r\n                    className=\"text-xs text-gray-500 underline hover:text-blue-600\"\r\n                    onClick={() => handleShowLog(task.id)}\r\n                  >\r\n                    Показать лог задачи\r\n                  </button>\r\n                </div>\r\n                {/* Ссылки на все выгруженные файлы */}\r\n                {task.status === 'completed' && task.result_files && (\r\n                  <div className=\"mt-2 flex flex-col gap-1\">\r\n                    <span className=\"text-xs text-gray-500\">Файлы результатов:</span>\r\n                    {Object.entries(task.result_files).map(([site, path]) => (\r\n                      <a\r\n                        key={site}\r\n                        href={`${BACKEND_URL}${path.replace(/\\\\/g, '/')}`}\r\n                        className=\"text-sm font-medium text-blue-600 hover:text-blue-500\"\r\n                        download\r\n                      >\r\n                        {site === 'autopiter' && 'Autopiter'}\r\n                        {site === 'emex' && 'Emex'}\r\n                        {site === 'armtek' && 'Armtek'}\r\n                        {!['autopiter','emex','armtek'].includes(site) && site}\r\n                      </a>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                {task.status === 'completed' && task.result_file && (\r\n                  <div className=\"mt-2\">\r\n                    <a\r\n                      href={`${BACKEND_URL}${task.result_file}`}\r\n                      className=\"text-sm font-medium text-blue-600 hover:text-blue-500\"\r\n                      download\r\n                    >\r\n                      Скачать результат\r\n                    </a>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n     {/* Модальное окно для лога */}\r\n     {logModal.open && (\r\n       <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40\">\r\n         <div className=\"bg-white rounded-lg shadow-lg max-w-2xl w-full p-6 relative\">\r\n           <button\r\n             className=\"absolute top-2 right-2 text-gray-400 hover:text-gray-700\"\r\n             onClick={handleCloseLog}\r\n           >\r\n             ×\r\n           </button>\r\n           <h2 className=\"text-lg font-bold mb-2\">Лог задачи #{logModal.taskId}</h2>\r\n           <pre className=\"bg-gray-100 p-2 rounded text-xs max-h-96 overflow-auto whitespace-pre-wrap\">\r\n             {logModal.log}\r\n           </pre>\r\n         </div>\r\n       </div>\r\n     )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tasks;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}